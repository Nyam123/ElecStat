<html>
    <head> 
        <title>ElecStat</title>
        
        <!--Scripts be here-->
        <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
        <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
        <script type="application/javascript" src="script/jquery-ui.min.js"></script>
        
        <script type="application/javascript" src="script/script.js"></script>
        <script type="application/javascript" src="script/jQAllRangeSliders-min.js"></script>
        <script type="application/javascript" src="script/Misc.js"></script>
        
        <!--Stylesheets-->
        <link rel="stylesheet" href="style/style.css"></link>
        <link rel="stylesheet" href="style/iThing-min.css"></link>

    </head>
    
    
<body>
    <script>
        //Basic init
        var w=window.innerWidth; var h=window.innerHeight;
        var svgWidth = w/2.09, svgHeight = h/1.3;
        var svg = d3.select('body').attr("width",w).attr("height",h);
        //Title
        svg.append('p').attr('id','ElectStat-title').text("ElectStat");
        
        
/* Generate Random Numbers and color is assigned to each state based upon value generated by random function*/        
function pr()
    {
        var i=0;
        var j=[];
        //j=combine_ids(a);
        for(i=0;i<=3;i++)
            {
                var b= [];
                b[i]=getRandomInt(0,100);
               // j=combine_ids(a);
                if(b[i]>=0 && b[i]<20)
                {
                    fillcolor();
                }
                else if(b[i]>=20 && b[i]<40)
                {
                    fillcolor();
                }
                else if(b[i]>=40 && b[i]<60)
                {
                    fillcolor();
                }
                else if(b[i]>=60 && b[i]<=100)
                {
                    fillcolor();
                }
        }
        }
        function fillcolor()
       {
$('#HI').css({fill:'90EE90'});
$('#AK').css({fill:'#66CD00'});
$('#NH').css({fill:'#76EE00'});
$('#MI-').css({fill:'#4A7023'});
$('#FL').css({fill:'#66CD00'});
$('#KS').css({fill:'#78AB46'});
$('#VT').css({fill:'#4A7023'});
$('#ME').css({fill:'#458B00'});
$('#RI').css({fill:'#66CD00'});
$('#NY').css({fill:'#76EE00'});
$('#PA').css({fill:'#7CFC00'});
$('#NJ').css({fill:'#7FFF00'});
$('#DE').css({fill:'#3D5229'});
$('#MD').css({fill:'#629632'});
$('#VA').css({fill:'#659D32'});
$('#WV').css({fill:'#324F17'});
$('#OH').css({fill:'#608341'});
$('#IN').css({fill:'#BCED91'});
$('#IL').css({fill:'#488214'});
$('#CT').css({fill:'#577A3A'});
$('#WI').css({fill:'#397D02'});
$('#NC').css({fill:'#83F52C'});
$('#DC').css({fill:'#567E3A'});
$('#MA').css({fill:'#9DB68C'});
$('#TN').css({fill:'#A6D785'});
$('#AR').css({fill:'#61B329'});
$('#MO').css({fill:'#77896C'});
$('#GA').css({fill:'#3F602B'});
$('#SC').css({fill:'#3F6826'});
$('#KY').css({fill:'#476A34'});
$('#AL').css({fill:'#5DFC0A'});
$('#LA').css({fill:'#93DB70'});
$('#MS').css({fill:'#3B5E2B'});
$('#IA').css({fill:'#84BE6A'});
$('#MN').css({fill:'#4CBB17'});
$('#OK').css({fill:'#3A6629'});
$('#TX').css({fill:'#49E20E'});
$('#NM').css({fill:'#308014'});
$('#SP-').css({fill:'#55AE3A'});
$('#MT').css({fill:'#7BBF6A'});
$('#NE').css({fill:'#4DBD33'});
$('#SD').css({fill:'#395D33'});
$('#ND').css({fill:'#596C56'});
$('#WY').css({fill:'#86C67C'});
$('#CO').css({fill:'#7BCC70'});
$('#ID').css({fill:'#699864'});
$('#UT').css({fill:'#3D8B37'});
$('#AZ').css({fill:'#63AB62'});
$('#NV').css({fill:'#4AC948'});
$('#OR').css({fill:'#698B69'});
$('#WA').css({fill:'#2F4F2F'});
$('#CA').css({fill:'#426F42'});
$('#PR').css({fill:'#548B54'});
$('#VI').css({fill:'#71C671'});
$('#GU').css({fill:'#215E21'});
$('#MP').css({fill:'#228B22'});
$('#AS').css({fill:'#32CD32'});
 }
       /* function combine_ids( a ) {
                      var tmp = [];
                for ( var i = 0; i < a.length; i++ ) {
                  tmp[i] = "'" + String( a[i] ) + "'";
                            window.alert(tmp[i]);
                        }
            return tmp;
        }*/
            function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
                
        //Choropleth map
        var map = svg.append('svg').attr('id','choro-map').attr('class','svgclass').attr("width",svgWidth).attr('height',svgHeight).append('g');
        d3.xml("Blank_US_Map.svg", "image/svg+xml", function(xml){
            $('#choro-map g').append(xml.documentElement);
            d3.select('#blank_map').attr("viewBox", "10 30 920 500");
            pr();
        });
        map.selectAll(".palette")
    .data(d3.entries(colorbrewer))
  .enter().append("span")
    .attr("class", "palette")
    .attr("title", function(d) { return d.key; })
    .on("click", function(d) { console.log(d3.values(d.value).map(JSON.stringify).join("\n")); })
  .selectAll(".swatch")
    .data(function(d) { return d.value[d3.keys(d.value).map(Number).sort(d3.descending)[0]]; })
  .enter().append("span")
    .attr("class", "swatch")
    .style("background-color", function(d) { return d; });
        //Line graph
        var lineGraph = svg.append('svg').attr('id','line-graph').attr('class','svgclass').attr("width",svgWidth).attr('height',svgHeight).append('g');
        
        //Controls
       // var controls = svg.append('svg').attr('id','controls').attr('class','svgclass').attr('width','100%').attr('height','100%').append('g');
        //Doc ready
       $(document).ready(function() {
          $("#YearSlider").rangeSlider({bounds: {min: 2001, max: 2015}},{defaultValues:{min: 2005, max: 2010}});
          $("#MonthSlider").rangeSlider(
              {bounds: {min: 0, max: 11}},
              {defaultValues:{min: 2, max: 5}},
              {formatter:function(val){
                  var value = Math.round(val);
                  return months[value];
                  console.log(value);
              }}
          );
       });
        //Doc end
    </script>
    <div id ="Source-checklist">
        <div>
            <input type="checkbox" name="GenTypes" value="Nuclear" /><label>Nuclear</label>
            <input type="checkbox" name="GenTypes" value="Solar" /><label>Solar</label>
            <input type="checkbox" name="GenTypes" value="Wind" /><label>Wind</label>
            <input type="checkbox" name="GenTypes" value="Thermal" /><label>Thermal</label>
        </div>
    </div>
    <div id="YearSlider"></div>
    <div id="MonthSlider"></div>
</body>
</html>